10.4 任务管理
10.4.1 模块目标
1. 任务管理是数据和模型结合的执行单元。
2. 用户可在项目下基于已处理好的数据与模型，发起 预测、评估、对比、因果可视化 等任务。
3. 支持 传统模式 和 Solo模式 的差异化体验：
  1. 传统模式：支持任务多样化（预测 / 模型评估 / 任务对比 / 多模型并行）。
  2. Solo模式：支持一键预测、因果可视化和自动报表生成，操作最简化。
10.4.2 功能说明
1. 任务创建：选择数据集（指定版本） + 模型 → 配置任务参数 → 设置任务优先级 → 保存 → 系统生成任务 ID → 加入调度队列。
  1. 数据集选择
    1. 用户必须选择已上传/订阅并完成预处理的数据集。
    2. 必须指定版本（如 v1、v2），不可为空。
  2. 模型选择
    1. 支持选择单个模型或多个模型（并行预测/对比）。
    2. 模型来源：自研模型 / 微调模型 / 第三方模型。
  3. 预测目标字段（预测 / 分类 / 评估 / 回归任务）
    1. 必填字段，用户选择数据中的目标列。
    2. Solo模式：系统自动识别（可手动修改）。
  4. 超参数设置
  5. 两种方式：
    1. 自动搜参（AutoML）
      1. 必须设置早停时间（最大执行时长，单位分钟）。
      2. 系统自动搜索超参数组合。
    2. 手动配置（JSON 格式）
      1. 用户直接输入 JSON 参数字典，系统会进行 schema 校验。
  6. 运行资源配置
    1. 必填：CPU / GPU / 自动分配。
    2. 资源配额：核心数、显存限制、最大运行时长。
    3. Solo模式：默认选择“自动分配”。
  7. 任务优先级：
    1. 字段定义
      1. 任务优先级用于决定任务在调度队列中的执行顺序。
      2. 支持 高 / 中 / 低 三个等级，默认中。
        1. Solo模式：固定为中
    2. 调度规则
      1. 高优先级任务 → 插队执行，抢占低优先级任务。
      2. 中优先级任务 → 按提交时间顺序执行。
      3. 低优先级任务 → 在资源空闲时执行。
      4. 可追溯性：
        1. 任务详情页展示任务优先级。
        2. 日志记录调度优先级和调度动作（如「高优先级抢占低优先级任务」）。
  8. 任务保存与提交
    1. 系统校验（数据版本、模型、参数、资源） → 通过后生成任务 ID。
    2. 加入调度队列，等待执行。
2. 任务列表管理
  1. 列表展示
    1. 默认展示用户所在项目下的所有任务。
    2. 支持 网格视图 和 列表视图 两种切换方式（默认列表）。
  2. 表格字段：字段名称	数据类型	示例值	说明
任务ID	String	TASK-2025-001	系统唯一标识，点击可进入任务详情页
任务名称	String	缺陷率预测任务	用户自定义名称
任务类型	Enum	预测 / 分类 / 评估 / 回归	任务目标
数据集名称	String	DATA-2025-001	任务使用的数据集
数据版本	String	v2	保证复现性
模型名称	Array	[MODEL-001, MODEL-002]	可为单模型或多模型
任务优先级	Enum	高 / 中 / 低	默认中，高亮显示
状态	Enum	排队中 / 运行中 / 成功 / 失败	状态颜色区分：绿=成功，红=失败，蓝=运行中，灰=排队
创建时间	DateTime	2025/9/28 14:30	系统生成
完成时间	DateTime	2025/9/28 15:00	系统生成
操作按钮	Actions	查看详情 / 重试 / 终止 / 归档 / 导出	根据任务状态动态展示
  3. 筛选功能：支持多维度组合筛选，用户可快速定位任务。筛选条件	说明
任务类型	下拉选择：预测 / 分类 / 评估 / 回归
状态	多选：排队中 / 运行中 / 成功 / 失败
数据集名称	输入框 + 下拉提示
模型名称	输入框 + 自动补全
任务优先级	高 / 中 / 低
时间范围	创建时间 / 完成时间范围筛选
  4. 排序功能
    1. 用户可选择表格排序字段，默认按 创建时间倒序。支持的排序字段：
      1. 创建时间
      2. 完成时间
      3. 状态（运行中 > 排队中 > 成功 > 失败）
      4. 任务优先级（高 > 中 > 低）
  5. 列表操作
    1. 单任务操作
      1. 查看详情：进入任务详情页，展示运行日志、结果报表、因果图等。
      2. 重试（失败任务可见）：点击后弹窗确认 → 重新提交任务到队列。
      3. 终止（运行中任务可见）：点击后弹窗确认 → 停止任务，状态更新为「失败-用户终止」。
      4. 归档：将任务状态改为归档，归档后任务状态冻结（不可修改，不可重试/终止）。已归档任务可在「列表」中查看详情和导出报表。
      5. 导出：支持导出任务运行日志、结果报表（PDF/Excel）。
    2. 批量操作
      1. 用户可多选任务，执行以下操作：
        1. 归档（仅对失败/完成的任务可用）
        2. 批量导出结果报表
        3. 批量重试（失败任务）
3. 任务详情：提供任务完成后的 指标报表 和 可视化展示，便于用户评估模型效果。支持 分类、回归 两大类任务的标准指标，参考 sklearn 的主流实现。支持 因果可视化，通过调用 DeepSeek 或大模型解释预测结果，提供因果链条和可解释性分析。支持结果导出（PDF/Excel/JSON），满足复盘、汇报和审计需求。
  1. 任务元信息区
    1. 字段：任务ID、任务名称、任务类型、任务优先级、任务状态、创建时间、完成时间。
    2. 展示任务执行状态流转（排队 → 运行中 → 完成/失败）。
  2. 数据集信息区
    1. 展示用户选择的数据集和版本：
      1. 数据集名称
      2. 数据集ID + 版本号
      3. 描述信息（用户在数据管理中填写的描述）
      4. 数据大小、字段数、样本数
      5. 来源（上传 / 订阅）
    2. 数据预览区
      1. 显示前 10 行（或用户指定行数）的数据表格，字段名 + 示例值。
      2. 支持用户点击「查看更多」跳转到数据详情页。
      3. 支持字段级元信息（字段名、类型、缺失率）。
  3. 模型信息区
    1. 展示任务所用模型：
      1. 模型名称
      2. 模型ID
      3. 模型类型（自研 / 微调 / 第三方）
      4. 模型版本号
      5. 模型描述
    2. 支持并行任务：多模型时以卡片列表形式展示。
  4. 参数配置区
    1. 展示运行时参数配置：
      1. 预测目标字段（分类/回归任务必填）
      2. 超参数配置（JSON 或 AutoML 参数）
      3. 运行资源配置（CPU/GPU，配额）
  5. 结果展示区
    1. 分类任务结果（准确率（Accuracy）、精确率（Precision）、召回率（Recall）、F1 分数、ROC 曲线与 AUC 值、混淆矩阵等）。
      1. 指标报表
        1. Accuracy（准确率）
        2. Precision（精确率）（支持 micro/macro/weighted 三种方式）
        3. Recall（召回率）（支持 micro/macro/weighted）
        4. F1-score（默认 macro，可切换 micro/weighted）
        5. ROC-AUC（默认 macro，可切换 micro/weighted）
      2. 可视化
        1. ROC 曲线：多分类任务绘制每一类的 ROC 曲线，并支持 macro/micro 平均。
        2. Precision-Recall 曲线：展示模型在不同阈值下的表现。
        3. 混淆矩阵：彩色热力图形式展示预测结果与真实标签的对比。
        4. 柱状图/折线图：展示不同模型/参数下的指标对比。
    2. 回归任务结果（均方误差（MSE）、均方根误差（RMSE）、平均绝对误差（MAE）、决定系数（R²）、残差图等）。
      1. 指标报表
        1. MSE（均方误差）
        2. RMSE（均方根误差）
        3. MAE（平均绝对误差）
        4. R²（决定系数）
      2. 可视化
        1. 残差图（Residual Plot）：横坐标为预测值，纵坐标为残差。
        2. 预测值 vs 真实值散点图：用于直观比较预测与实际情况。
        3. 误差分布直方图：展示预测误差的分布情况。
        4. 模型对比柱状图：多模型并行时对比不同指标。直方图，对比模型性能差异
    3. 因果可视化（因果链条、解释文本）
      1. 支持调用 DeepSeek 或大模型解释预测结果，展示因果链条
      2. 因果链条展示：
        1. 节点：特征字段（如工艺参数、客户属性）。
        2. 边：因果关系（箭头方向表示因果方向，边权重表示影响强度）。
      3. 解释结果卡片：展示大模型生成的自然语言解释，例如：
        1. “缺陷率升高的主要原因是温度参数偏高和设备老化。”
      4. 交互操作：
        1. 支持点击某一特征节点，查看该特征对结果的因果贡献度。
        2. 支持筛选展示前 N 个最强因果链。
    4. 导出功能：
      1. 导出格式：PDF、Excel、JSON
      2. 内容包含：任务元信息（ID、名称、类型、优先级、状态）、指标报表、可视化图表截图、因果解释。
      3. 导出权限：所有创建者与项目成员可导出；管理员可导出所有任务。
    5. 字段表:字段名称	数据类型	校验规则	示例值	说明
任务ID	String	系统生成	TASK-2025-001	任务唯一标识
指标类型	Enum	分类 / 回归 / 因果	分类	决定展示指标
Accuracy	Float	0 ≤ val ≤ 1	0.92	分类任务指标
Precision	Float	0 ≤ val ≤ 1	0.9	分类任务指标
Recall	Float	0 ≤ val ≤ 1	0.88	分类任务指标
F1-score	Float	0 ≤ val ≤ 1	0.89	分类任务指标
ROC-AUC	Float	0 ≤ val ≤ 1	0.91	分类任务指标
MSE	Float	val ≥ 0	0.05	回归任务指标
RMSE	Float	val ≥ 0	0.22	回归任务指标
MAE	Float	val ≥ 0	0.18	回归任务指标
R²	Float	-∞ ≤ val ≤ 1	0.87	回归任务指标
因果链条	JSON	必须符合图结构格式	{featureA→featureB:0.8}	因果关系图
因果解释	Text	≤2000 字	温度升高 → 缺陷率增加	大模型自然语言解释
可视化配置	JSON	符合图表 schema	{"chart":"ROC","data":[]}	图表配置项
导出格式	Enum	PDF / Excel / JSON	PDF	导出文件格式
  6. 运行日志（与结果联动，辅助排错和解释）
    1. 展示任务的执行上下文（数据、模型、参数）和运行日志，以及最终的推理结果和可视化。
4. 任务对比：支持两个任务（数据相同但模型/参数不同等）的结果对比。
  1. 对比条件
    1. 必须满足：
      1. 数据集相同（同一数据源和版本）。
      2. 任务类型相同（预测 vs 预测、回归 vs 回归）。
    2. 可对比的差异项：
      1. 模型不同。（在同一任务内即可实现）
      2. 参数配置不同（超参数、运行资源）。
      3. 数据预处理策略不同。
  2. 对比维度
    1. 指标对比
      1. 分类任务：Accuracy、Precision、Recall、F1、ROC-AUC、混淆矩阵。
      2. 回归任务：MSE、RMSE、MAE、R²。
      3. 其他可选：训练耗时、推理时延、资源占用率。
    2. 可视化对比
      1. 折线图 / 柱状图：展示不同任务指标差异。
      2. ROC 曲线对比：多条曲线叠加。
      3. 残差图（回归）：展示预测误差分布差异。
      4. 混淆矩阵：并排对比。
    3. 因果可视化对比
      1. 展示不同模型输出的因果链条，比较解释差异。
    4. 运行日志对比
      1. 支持按时间线对比运行阶段耗时（数据加载、训练、评估）。
      2. 对比 GPU/CPU 使用情况、失败警告等。
    5. 资源消耗对比
      1. 任务运行时长（总耗时、训练时长、推理时长）。
      2. 资源配额 vs 实际消耗。
    6. 输出形式
      1. 点击对比可以打开新页面查看对比详情
      2. 对比报告：生成可导出的 PDF/Excel 报告，包含指标表格 + 图表。
      3. 对比视图：在页面展示两个任务的并行卡片和指标差异。
      4. 差异高亮：系统高亮展示不同项（如学习率不同、模型不同）。
  3. 对比输入字段:字段名称	数据类型	校验规则	示例值	说明
对比任务ID1	String	必填，已完成任务	TASK-2025-001	任务1
对比任务ID2	String	必填，已完成任务	TASK-2025-002	任务2
数据集ID	String	必填，相同数据集	DATA-001	限制相同数据源
数据版本	String	必填，相同版本	v2	限制相同版本
对比类型	Enum	必填：指标对比 / 可视化对比 / 全量对比	全量对比	决定展示范围
输出方式	Enum	可选：页面展示 / 导出报告	页面展示	对比结果输出
  4. 对比输出字段:字段名称	数据类型	示例值	说明
指标差异表	JSON	{acc:0.91 vs 0.87}	两任务指标对比
图表对比结果	PNG/JS	ROC 曲线图	多模型叠加展示
日志对比	Text	GPU耗时差异	阶段性运行差异
资源消耗对比	JSON	{CPU:4h vs 3h}	资源利用率差异
因果可视化差异图	PNG/JS	因果链条对比图	模型解释差异
5. Solo模式快速通道：上传表格 → 系统自动配置任务 → 一键预测 → 可视化结果 + 自动报表。
  1. 数据输入
    1. 上传表格文件（CSV/Excel），或选择项目中已有的已清洗数据。
    2. 系统自动解析字段并检测目标列（分类 / 回归）。
    3. 支持用户修正系统识别的目标字段。
  2. 模型选择
    1. 系统自动推荐模型：
      1. 分类任务：推荐 XGBoost / LightGBM / 神经网络。
      2. 回归任务：推荐线性回归 / 随机森林 / LightGBM。
    2. 默认使用「推荐模型组合」运行（可包含多个模型并行）。
    3. 用户可手动取消某些模型，但不能新增模型。
  3. 参数配置
    1. 默认隐藏超参数配置。
    2. 所有参数由系统自动选择。
    3. 提供「高级选项」入口（可开关），允许业务人员仅修改目标列。
  4. 运行资源：由系统自动分配（CPU/GPU），用户不可手动配置。
  5. 任务优先级：固定为 中，不可修改。
  6. 任务运行
    1. 用户点击「立即运行」 → 系统自动校验数据 → 加入调度队列。
    2. 状态包括：排队中 / 运行中 / 成功 / 失败。
    3. 系统在运行过程中实时显示进度（数据准备 → 模型运行 → 结果生成）。
  7. 结果查看
    1. 自动生成结果报表：
      1. 分类任务：Accuracy、Precision、Recall、F1、ROC-AUC、混淆矩阵。
      2. 回归任务：MSE、RMSE、MAE、R²。
    2. 自动生成图表：
      1. 曲线图、柱状图、ROC曲线、多分类混淆矩阵。
    3. 因果可视化：调用大模型生成因果链条，解释预测原因。
    4. 自动生成可下载报告（PDF/Excel）。
  8. 任务对比
    1. Solo模式不提供自由对比功能。
    2. 系统自动生成 历史对比卡片，展示同一数据集下的最近结果。
    3. 业务人员可点击「查看差异」，对比主要指标（Accuracy、MSE 等）。

字段名称	数据类型	校验规则	示例值	说明
任务ID	String	系统生成，唯一	TASK-2025-001	任务唯一标识
任务名称	String	必填，标题长度为3~64个字符，不能包含字符“\ / : * ? " < > | ' &”，唯一，不允许重复，若重复则提示如有同名文件/文件夹，新上传的文件/文件夹存在重复，请修改后再上传。	缺陷预测任务-1	用户自定义名称
任务类型	Enum	必填：预测 / 分类 / 评估 / 回归	预测	确定任务目标
数据集选择	Enum	必填；单选；仅可选择 已预处理完成 且状态=成功 的数据集	DATA-2025-001	保障任务输入数据质量，避免使用未清洗/失败数据
模型选择	Enum	必填；可多选；默认勾选「自研模型」；必须为已存在且状态=可用的模型	[MODEL-001, MODEL-002]	支持单模型/多模型并行运行，供结果对比使用
任务优先级	Enum	必填：高 / 中 / 低（默认中）	中	决定调度顺序
状态	Enum	系统生成：排队中/运行中/成功/失败	运行中	当前任务状态
创建时间	DateTime	系统生成	2025/9/28 14:30	任务创建时间
完成时间	DateTime	系统生成	2025/9/28 15:00	任务完成时间
字段名称	数据类型	校验规则	示例值	说明
任务ID	String	系统生成，唯一	TASK-2025-001	任务唯一标识
任务名称	String	必填，标题长度为3~64个字符，不能包含字符“\ / : * ? " < > | ' &”，唯一，不允许重复，若重复则提示如有同名文件/文件夹，新上传的文件/文件夹存在重复，请修改后再上传。	缺陷预测任务-1	用户自定义名称
任务类型	Enum	必填：预测 / 分类 / 评估 / 回归	预测	确定任务目标
数据集选择	Enum	必填；单选；仅可选择 已预处理完成 且状态=成功 的数据集	DATA-2025-001	保障任务输入数据质量，避免使用未清洗/失败数据
模型选择	Enum	必填；可多选；默认勾选「自研模型」；必须为已存在且状态=可用的模型	[MODEL-001, MODEL-002]	支持单模型/多模型并行运行，供结果对比使用
任务优先级	Enum	必填：高 / 中 / 低（默认中）	中	决定调度顺序
状态	Enum	系统生成：排队中/运行中/成功/失败	运行中	当前任务状态
创建时间	DateTime	系统生成	2025/9/28 14:30	任务创建时间
完成时间	DateTime	系统生成	2025/9/28 15:00	任务完成时间
字段名称	数据类型	校验规则	示例值	说明
任务ID	String	系统自动生成	TASK-SOLO-001	系统内部唯一标识
任务名称	String	自动生成=数据集名 + 时间戳	交易预测-2025-01-01	任务默认名称
任务类型	Enum	固定：预测 / 因果可视化 / 自动报表	预测	Solo模式限定
数据集ID	String	必填，已上传/已清洗	DATA-001	数据来源
数据版本	String	必填	v3	数据版本
模型ID	Array	自动推荐	[MODEL-001]	系统推荐模型
预测目标字段	String	自动识别，可手动改	defect_rate	数据集中目标列
任务优先级	Enum	固定=中	中	不可修改
超参数配置	Hidden	默认自动配置	–	不展示给用户
运行资源类型	Hidden	自动分配	–	不展示给用户
10.4.5 用户操作流程
10.4.5.1 传统模式
1. 进入任务管理
  1. 进入任务列表：用户点击「任务管理」 → 系统展示任务列表。
  2. 筛选/搜索任务：用户在搜索框输入关键词（任务名/ID/数据集/模型），或使用筛选条件。
  3. 查看详情：用户点击任务ID或任务名 → 进入详情页。
  4. 重试任务：用户在列表中找到失败任务 → 点击「重试」 → 系统生成新任务ID并提交队列。
  5. 终止任务：用户在列表中找到运行中任务 → 点击「终止」 → 确认后更新状态为「失败-用户终止」。
  6. 归档任务：用户点击「归档」按钮 → 弹窗确认 → 任务状态变为归档，默认排在列表最后，用户可筛选查看。
  7. 批量操作：用户勾选多个任务 → 点击批量操作菜单 → 选择「删除 / 导出 / 重试」。
2. 新建任务
  1. 进入任务创建
    1. 用户进入「任务管理」 → 点击「新建任务」。
    2. 系统弹出任务创建表单。
  2. 选择任务类型
    1. 用户选择：预测 / 评估 / 对比 / 回归。
  3. 选择数据集与版本
    1. 用户从下拉框中选择数据集（必填）。
    2. 指定数据版本（必填）。
  4. 选择模型
    1. 用户从模型列表中选择一个或多个模型。
  5. 配置任务参数
    1. 输入预测目标字段（或系统自动识别）。
    2. 配置超参数：
      1. AutoML → 输入早停时间。
      2. 手动 → 输入 JSON 参数。
    3. 选择运行资源（CPU/GPU/自动）。
  6. 选择任务优先级（高/中/低，默认中）。
    1. 高优先级任务 → 插队执行。
    2. 中优先级 → 按提交时间顺序执行。
    3. 低优先级 → 空闲时执行。
  7. 校验与保存
    1. 系统校验：数据集是否有效、模型是否可用、参数合法性、资源可用性。
    2. 校验失败 → 提示错误。
    3. 校验通过 → 系统生成任务 ID，写入数据库。
  8. 提交任务
    1. 系统将任务加入调度队列。
    2. 页面提示：「任务已创建，任务ID=TASK-2025-001」。
3. 运行任务
  1. 系统调度任务 
  2. 实时输出运行状态（队列/运行中/完成/失败）。
4. 查看任务结果
  1. 查看结果：用户在任务列表中点击「查看详情」 → 打开任务详情页 → 自动定位到「结果卡片」区域。
  2. 选择指标视图
    1. 系统自动识别任务类型（分类/回归），默认展示对应指标。
    2. 多分类任务：默认使用 macro 方式，可手动切换 micro/weighted。
  3. 图表交互
    1. 用户可在 ROC 曲线、混淆矩阵等图表中点击、悬停，查看详细数值。
    2. 因果链图：用户可点击节点，展开因果解释。
  4. 导出结果：用户点击「导出」 → 选择 PDF / Excel / JSON → 系统生成文件并下载
5. 任务对比：
  1. 进入任务对比入口
    1. 用户在任务列表页勾选两个任务 → 点击「对比任务」。
    2. 或在任务详情页点击「添加对比」 → 选择另一个任务。
  2. 系统校验
    1. 校验是否为相同数据集、相同版本、相同类型任务。
    2. 不满足条件 → 提示「任务不可对比」。
  3. 加载对比结果
    1. 系统读取两个任务的指标、结果、日志。
    2. 后端计算差异并生成图表。
  4. 展示对比视图
    1. 页面展示：指标表格 / 图表对比 / 日志差异 / 资源消耗对比。
    2. 高亮差异项。
  5. 导出对比报告（可选）
    1. 用户点击「导出报告」。
    2. 系统生成 PDF/Excel 文件。
10.4.5.2 solo模式
1. 新建任务
  1. 用户在项目管理 → Solo模式 → 点击「快速上传」。
  2. 系统弹出上传表单：用户选择文件 / 拖拽文件。
  3. 系统自动解析数据字段，识别预测目标字段。
  4. 系统推荐模型组合，并默认启用。
  5. 用户确认 → 点击「运行任务」。
  6. 系统生成任务 ID → 加入调度队列。
2. 运行任务
  1. 系统调度资源 → 自动运行。
  2. 页面展示进度条：准备中 / 运行中 / 完成。
  3. 失败 → 提示原因（如「数据不合法」「模型运行错误」）。
3. 查看结果
  1. 用户点击任务卡片 → 打开任务详情页。
  2. 系统展示：
    1. 基本信息卡片（任务名、数据集、模型）。
    2. 数据预览区（样例数据前 10 行）。
    3. 结果卡片（指标表格、图表）。
    4. 因果链卡片（可视化解释）。
    5. 报表下载按钮（PDF/Excel）。
4. 历史对比
  1. 在任务详情页 → 系统自动展示最近一次任务结果。
  2. 用户点击「历史对比」 → 查看指标差异。
  3. 系统生成差异表格，展示性能提升/下降。
10.4.6 交互逻辑
1. 任务列表页：
  1. 任务列表页
    1. 默认显示最近30天任务。
    2. 用户可切换「网格/表格」模式。
    3. 列支持自定义：可调整顺序、隐藏/显示（任务名称和操作列不可隐藏）。
  2. 筛选交互
    1. 多选条件可叠加，实时刷新结果。
    2. 搜索支持模糊匹配任务名称/ID。
  3. 状态提示
    1. 运行中：蓝色标签 + 动态进度条（% 完成度）。
    2. 失败：红色标签，悬停显示失败原因。
    3. 成功：绿色标签，可点击查看报表。
  4. 操作按钮逻辑
    1. 不同状态下的操作按钮动态变化：
      1. 排队中：无操作
      2. 运行中：支持终止
      3. 成功：支持导出/查看详情
      4. 失败：支持重试/归档。
    2. 已归档任务：操作仅保留「查看详情 / 导出」
2. 任务详情页：
  1. 显示运行日志、报表、图表、因果推理结果。
  2. 支持导出 PDF/Excel 报告。
3. 任务创建：用户点击「新建任务」 → 填写任务表单 → 校验必填项 → 系统生成任务ID → 加入队列。
  1. 任务创建弹窗
    1. 字段：任务名称、任务类型、数据集选择、版本选择、模型选择、预测目标字段、超参数设置、运行资源配置。
    2. 必填项校验：红色边框提示「必填」。
  2. 超参数配置区
    1. AutoML：输入框（早停时间）。
    2. JSON：代码编辑框（带 JSON 格式校验）。
  3. 运行资源配置区
    1. 下拉框：CPU / GPU / 自动分配。
    2. 可选高级模式：自定义核心数、显存、内存配额。
  4. 任务优先级：任务优先级（单选框，高/中/低，默认中）
  5. 错误逻辑
    1. 数据集未选择 → 提示「请选择数据集和版本」。
    2. 模型未选择 → 提示「至少选择一个模型」。
    3. JSON 校验失败 → 提示「参数格式错误」。
  6. 提交反馈
    1. 成功：绿色提示「任务创建成功，ID=TASK-xxx」。
    2. 失败：红色提示「任务创建失败，请检查配置」。
4. 任务运行：后台调度计算 → 更新任务状态 → 写入日志。
5. 任务完成查看结果：系统生成报表与可视化结果 → 通知用户。
  1. 结果卡片布局
    1. 数据预览区：默认显示 10 行 → 支持分页/加载更多。
    2. 模型信息区：点击模型名称 → 跳转模型管理详情页。
    3. 参数配置区：JSON 参数展示在折叠框中，支持复制。
    4. 结果展示区：支持 tab 切换（指标 / 图表 / 因果）。
      6. 上方：指标报表（表格形式，支持展开/折叠）。
      7. 中部：可视化图表区（支持切换不同图表 tab）。
      8. 下方：因果解释卡片（仅预测任务显示）。
    5. 运行日志区：
      1. 支持自动刷新，实时追加最新日志。
      2. 日志格式：时间戳 + 日志级别 + 内容。
示例：
[2025-09-30 10:01:05] INFO: 任务进入队列  
[2025-09-30 10:01:10] INFO: 开始加载数据集 v2  
[2025-09-30 10:01:20] INFO: 模型 MODEL-001 初始化完成  
[2025-09-30 10:15:05] WARNING: GPU 内存占用过高，系统自动降级为 CPU  
[2025-09-30 10:29:55] INFO: 任务运行完成，生成结果文件  
[2025-09-30 10:30:00] SUCCESS: 任务成功完成  
      3. 支持下载完整日志（TXT/JSON）。
    6. 错误逻辑：如果任务失败 → 仅展示任务元信息 + 错误日志，隐藏结果区。
  2. 分类任务
    1. 可切换指标计算方式（micro/macro/weighted）。
    2. 混淆矩阵支持点击某一格，查看该分类的具体样本数。
  3. 回归任务
    1. 残差图支持缩放与拖动。
    2. 误差直方图支持阈值线配置。
  4. 因果可视化
    1. 因果图可拖拽、缩放、聚焦。
    2. 节点点击 → 展示「因果贡献度」与自然语言解释。
  5. 错误逻辑
    1. 如果任务运行失败 → 结果卡片区域显示「任务失败，未生成结果」，并提供「重试」按钮。
6. 任务对比（传统模式）：选择两个任务 → 系统生成对比可视化（曲线对比 / 指标表格）。
  1. 对比选择
    1. 列表页：支持勾选两个任务 → 按钮高亮「任务对比」。
    2. 详情页：右上角操作栏「对比任务」。
  2. 对比展示页面
    1. 顶部信息栏：任务ID、任务名称、数据集、版本、模型。
    2. 指标对比表：表格 + 差异高亮。
    3. 图表对比区：ROC 曲线 / 残差图 / 混淆矩阵。
    4. 日志对比区：展示运行阶段耗时差异。
    5. 因果对比区：两个因果链图并排显示。
  3. 错误逻辑
    1. 如果用户勾选任务数 ≠ 2 → 提示「请选择两个任务进行对比」。
    2. 如果任务状态 ≠ 已完成 → 提示「仅支持已完成任务对比」。
    - 如果数据集或任务类型不一致 → 提示「任务不满足对比条件」。
7. Solo模式快速通道：上传表格 → 系统自动生成任务 → 运行并展示结果。
  1. 任务列表页
    1. 仅显示 Solo模式任务。
    2. 卡片样式：任务名 / 数据集 / 模型推荐数 / 状态 / 创建时间。
    3. 操作：运行新任务 / 查看详情。
  2. 任务创建弹窗
    1. 字段：任务名称（自动生成）、文件选择 / 数据选择、预测目标字段（可编辑）。
    2. 系统推荐模型：列表展示，用户可取消某些模型。
    3. 按钮：运行任务。
  3. 任务详情页
    1. 基本信息卡片：任务名、数据集描述、版本号、推荐模型列表。
    2. 数据预览卡片：展示部分数据行。
    3. 结果卡片：指标表格 + 图表。
    4. 因果解释卡片：可视化链条。
    5. 历史对比卡片：与最近一次结果对比。
  4. 错误逻辑
    1. 上传非表格数据 → 提示「仅支持 CSV/Excel」。
    2. 系统未识别目标字段 → 提示「请选择预测目标字段」。
    3. 模型运行失败 → 提示「运行失败，请稍后重试」。

热卖管理主流程：
flowchart TD
    A[进入任务管理] --> B{选择操作类型}
    B -->|查看任务列表| C[任务列表页面]
    B -->|新建任务| D[点击新建任务]
    B -->|任务对比| E[选择对比任务]
    B -->|筛选搜索| F[设置筛选条件]
    
    C --> G{视图模式选择}
    G -->|网格视图| H[卡片式展示任务]
    G -->|列表视图| I[表格式展示任务]
    
    H --> J{任务操作}
    I --> K[自定义列配置]
    K --> L[保存列配置偏好]
    L --> J
    
    J -->|查看详情| M[进入任务详情页]
    J -->|重试任务| N[重新提交失败任务]
    J -->|终止任务| O[停止运行中任务]
    J -->|归档任务| P[归档完成任务]
    J -->|导出结果| Q[导出任务报告]
    J -->|批量操作| R[批量处理任务]
    
    F --> S{筛选类型}
    S -->|任务类型| T[选择预测/分类/评估/回归]
    S -->|任务状态| U[选择排队/运行/成功/失败]
    S -->|数据集筛选| V[选择数据集]
    S -->|模型筛选| W[选择模型]
    S -->|优先级筛选| X[选择高/中/低优先级]
    S -->|时间筛选| Y[设置时间范围]
    
    T --> Z[应用筛选条件]
    U --> Z
    V --> Z
    W --> Z
    X --> Z
    Y --> Z
    Z --> C


传统模式任务创建流程
flowchart TD
    A[点击新建任务] --> B{项目模式判断}
    B -->|传统模式| C[加载传统任务创建表单]
    B -->|Solo模式| D[进入Solo快速通道]
    
    C --> E[填写任务基本信息]
    E --> F[输入任务名称]
    F --> G[选择任务类型]
    G --> H{任务类型选择}
    H -->|预测任务| I[配置预测参数]
    H -->|分类任务| J[配置分类参数]
    H -->|评估任务| K[配置评估参数]
    H -->|回归任务| L[配置回归参数]
    
    I --> M[选择数据集和版本]
    J --> M
    K --> M
    L --> M
    
    M --> N{数据集状态检查}
    N -->|未预处理完成| O[显示数据集不可用提示]
    N -->|预处理完成| P[显示可用数据集列表]
    
    O --> Q[跳转数据预处理]
    P --> R[选择数据集版本]
    R --> S[选择预测目标字段]
    
    S --> T[选择模型]
    T --> U{模型数量选择}
    U -->|单模型| V[选择一个模型]
    U -->|多模型| W[选择多个模型并行]
    
    V --> X[配置超参数]
    W --> X
    
    X --> Y{超参数配置方式}
    Y -->|自动搜参AutoML| Z[设置早停时间]
    Y -->|手动配置| AA[输入JSON参数]
    
    Z --> BB[系统自动搜索超参数]
    AA --> CC[JSON格式校验]
    CC --> DD{JSON格式检查}
    DD -->|格式错误| EE[显示JSON格式错误]
    DD -->|格式正确| FF[保存参数配置]
    
    EE --> AA
    BB --> GG[配置运行资源]
    FF --> GG
    
    GG --> HH{资源配置选择}
    HH -->|CPU| II[配置CPU资源]
    HH -->|GPU| JJ[配置GPU资源]
    HH -->|自动分配| KK[系统自动分配资源]
    
    II --> LL[设置核心数和内存]
    JJ --> MM[设置GPU显存和核心数]
    KK --> NN[使用默认资源配置]
    
    LL --> OO[设置任务优先级]
    MM --> OO
    NN --> OO
    
    OO --> PP{优先级选择}
    PP -->|高优先级| QQ[插队执行抢占资源]
    PP -->|中优先级| RR[按时间顺序执行]
    PP -->|低优先级| SS[空闲时执行]
    
    QQ --> TT[系统全面校验]
    RR --> TT
    SS --> TT
    
    TT --> UU{校验结果}
    UU -->|数据集无效| VV[显示数据集错误]
    UU -->|模型不可用| WW[显示模型错误]
    UU -->|参数不合法| XX[显示参数错误]
    UU -->|资源不足| YY[显示资源错误]
    UU -->|校验通过| ZZ[生成任务ID]
    
    VV --> AAA[用户修改配置]
    WW --> AAA
    XX --> AAA
    YY --> AAA
    AAA --> TT
    
    ZZ --> BBB[写入数据库]
    BBB --> CCC[加入调度队列]
    CCC --> DDD[显示任务创建成功]
    DDD --> EEE[返回任务列表]

solo快速任务流程
flowchart TD
    A[进入Solo模式] --> B[快速任务创建]
    B --> C{数据输入方式}
    C -->|上传新文件| D[选择CSV/Excel文件]
    C -->|使用已有数据| E[选择项目中已清洗数据]
    
    D --> F[文件格式检查]
    F --> G{文件格式验证}
    G -->|格式不支持| H[显示格式错误提示]
    G -->|格式正确| I[系统自动解析字段]
    
    H --> D
    I --> J[自动检测目标列]
    E --> J
    
    J --> K{目标字段识别}
    K -->|识别成功| L[显示推荐目标字段]
    K -->|识别失败| M[提示用户手动选择]
    
    L --> N[用户确认或修改目标字段]
    M --> N
    
    N --> O[系统自动推荐模型]
    O --> P{任务类型判断}
    P -->|分类任务| Q[推荐XGBoost/LightGBM/神经网络]
    P -->|回归任务| R[推荐线性回归/随机森林/LightGBM]
    
    Q --> S[默认启用推荐模型组合]
    R --> S
    
    S --> T[用户可选择取消某些模型]
    T --> U[隐藏超参数配置]
    U --> V[系统自动选择参数]
    V --> W[自动分配运行资源]
    W --> X[固定中等优先级]
    
    X --> Y[生成默认任务名称]
    Y --> Z[任务名=数据集名+时间戳]
    Z --> AA[用户点击立即运行]
    
    AA --> BB[系统自动校验数据]
    BB --> CC{数据校验结果}
    CC -->|数据不合法| DD[显示数据错误提示]
    CC -->|数据合法| EE[生成Solo任务ID]
    
    DD --> FF[检查数据质量]
    FF --> C
    
    EE --> GG[加入调度队列]
    GG --> HH[显示任务创建成功]
    HH --> II[跳转任务运行状态页]

任务运行和状态管理流程
flowchart TD
    A[任务进入调度队列] --> B[系统资源调度]
    B --> C{资源可用性检查}
    C -->|资源不足| D[任务保持排队状态]
    C -->|资源充足| E[开始任务执行]
    
    D --> F[等待资源释放]
    F --> C
    
    E --> G[任务状态更新为运行中]
    G --> H[分配计算资源]
    H --> I[加载数据集和模型]
    I --> J[开始模型训练/预测]
    
    J --> K[实时更新运行状态]
    K --> L{任务运行监控}
    L -->|正常运行| M[更新进度信息]
    L -->|资源不足| N[系统自动调整资源]
    L -->|运行错误| O[记录错误日志]
    L -->|用户终止| P[处理终止请求]
    
    M --> Q[生成运行日志]
    Q --> R{运行状态检查}
    R -->|继续运行| K
    R -->|运行完成| S[任务完成处理]
    
    N --> T[降级资源配置]
    T --> U[记录资源调整日志]
    U --> K
    
    O --> V[任务状态更新为失败]
    V --> W[保存错误信息]
    W --> X[释放占用资源]
    X --> Y[通知任务失败]
    
    P --> Z[确认终止操作]
    Z --> AA{用户确认}
    AA -->|取消| K
    AA -->|确认| BB[强制终止任务]
    
    BB --> CC[任务状态更新为用户终止]
    CC --> DD[清理运行环境]
    DD --> X
    
    S --> EE[生成执行结果]
    EE --> FF[计算性能指标]
    FF --> GG[生成可视化图表]
    GG --> HH[调用大模型生成因果解释]
    HH --> II[任务状态更新为成功]
    II --> JJ[释放占用资源]
    JJ --> KK[通知任务完成]
    
    Y --> LL[更新任务列表显示]
    KK --> LL


任务结果查看流程
flowchart TD
    A[点击查看任务详情] --> B[加载任务详情页]
    B --> C{任务状态检查}
    C -->|失败状态| D[显示错误信息和日志]
    C -->|成功状态| E[加载完整结果展示]
    C -->|运行中| F[显示实时运行状态]
    
    D --> G[显示失败原因]
    G --> H[提供重试按钮]
    H --> I[显示运行日志]
    
    F --> J[显示进度条]
    J --> K[实时刷新运行日志]
    K --> L[显示资源使用情况]
    
    E --> M[任务元信息区]
    M --> N[显示任务ID/名称/类型/优先级]
    N --> O[显示创建时间/完成时间]
    O --> P[显示任务状态流转]
    
    E --> Q[数据集信息区]
    Q --> R[显示数据集名称和版本]
    R --> S[显示数据统计信息]
    S --> T[数据预览表格前10行]
    T --> U[提供查看更多数据链接]
    
    E --> V[模型信息区]
    V --> W{模型数量检查}
    W -->|单模型| X[显示单个模型信息]
    W -->|多模型| Y[卡片列表展示多模型]
    
    X --> Z[显示模型名称/ID/类型/版本]
    Y --> Z
    Z --> AA[显示模型描述信息]
    
    E --> BB[参数配置区]
    BB --> CC[显示预测目标字段]
    CC --> DD[显示超参数配置JSON]
    DD --> EE[显示运行资源配置]
    
    E --> FF[结果展示区]
    FF --> GG{任务类型识别}
    GG -->|分类任务| HH[显示分类结果指标]
    GG -->|回归任务| II[显示回归结果指标]
    
    HH --> JJ[显示Accuracy/Precision/Recall/F1]
    JJ --> KK[显示ROC-AUC指标]
    KK --> LL[生成ROC曲线图]
    LL --> MM[生成混淆矩阵热力图]
    MM --> NN[生成Precision-Recall曲线]
    
    II --> OO[显示MSE/RMSE/MAE/R²]
    OO --> PP[生成残差图]
    PP --> QQ[生成预测值vs真实值散点图]
    QQ --> RR[生成误差分布直方图]
    
    NN --> SS[因果可视化区]
    RR --> SS
    SS --> TT[调用大模型生成因果解释]
    TT --> UU[显示因果链条图]
    UU --> VV[显示自然语言解释文本]
    VV --> WW[支持节点点击交互]
    
    SS --> XX[运行日志区]
    XX --> YY[时间戳+日志级别+内容]
    YY --> ZZ[支持日志自动刷新]
    ZZ --> AAA[支持下载完整日志]
    
    SS --> BBB[导出功能区]
    BBB --> CCC{导出格式选择}
    CCC -->|PDF导出| DDD[生成PDF报告]
    CCC -->|Excel导出| EEE[生成Excel文件]
    CCC -->|JSON导出| FFF[生成JSON数据]
    
    DDD --> GGG[包含任务信息+指标+图表]
    EEE --> GGG
    FFF --> GGG
    GGG --> HHH[提供下载链接]


任务对比功能流程
flowchart TD
    A[任务对比入口] --> B{对比方式选择}
    B -->|列表页选择| C[勾选两个任务]
    B -->|详情页对比| D[点击添加对比任务]
    
    C --> E[点击任务对比按钮]
    D --> F[选择另一个对比任务]
    F --> E
    
    E --> G[系统对比条件校验]
    G --> H{校验结果}
    H -->|数据集不同| I[显示数据集不匹配错误]
    H -->|版本不同| J[显示版本不匹配错误]
    H -->|任务类型不同| K[显示任务类型不匹配错误]
    H -->|任务未完成| L[显示任务状态错误]
    H -->|校验通过| M[加载对比数据]
    
    I --> N[返回任务列表]
    J --> N
    K --> N
    L --> N
    
    M --> O[读取两个任务结果数据]
    O --> P[计算指标差异]
    P --> Q[生成对比图表]
    Q --> R[创建对比报告页面]
    
    R --> S[任务基本信息对比区]
    S --> T[显示任务ID/名称对比]
    T --> U[显示模型/参数差异]
    U --> V[显示资源配置对比]
    
    R --> W[指标对比区]
    W --> X{任务类型判断}
    X -->|分类任务| Y[对比分类指标]
    X -->|回归任务| Z[对比回归指标]
    
    Y --> AA[Accuracy/Precision/Recall对比表]
    Y --> BB[F1/ROC-AUC差异高亮]
    Z --> CC[MSE/RMSE/MAE对比表]
    Z --> DD[R²差异高亮显示]
    
    AA --> EE[可视化对比区]
    BB --> EE
    CC --> EE
    DD --> EE
    
    EE --> FF[ROC曲线叠加对比]
    EE --> GG[混淆矩阵并排对比]
    EE --> HH[残差图对比显示]
    EE --> II[误差分布对比]
    
    FF --> JJ[因果对比区]
    GG --> JJ
    HH --> JJ
    II --> JJ
    
    JJ --> KK[因果链条并排展示]
    KK --> LL[因果解释文本对比]
    LL --> MM[因果差异高亮标记]
    
    R --> NN[运行日志对比区]
    NN --> OO[运行阶段耗时对比]
    OO --> PP[资源使用情况对比]
    PP --> QQ[错误警告信息对比]
    
    R --> RR[导出对比报告]
    RR --> SS{导出格式选择}
    SS -->|PDF报告| TT[生成PDF对比报告]
    SS -->|Excel表格| UU[生成Excel对比文件]
    
    TT --> VV[包含完整对比信息]
    UU --> VV
    VV --> WW[提供下载链接]
